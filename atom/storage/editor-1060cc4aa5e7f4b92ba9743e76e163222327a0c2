{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":23,"width":838,"height":820,"maximized":false},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"project":{"paths":["/Users/hectorhuertas/turing/1module/workshops/event_manager/lib"],"buffers":[{"text":"<html>\n<head>\n  <meta charset='utf-8'>\n  <title>Thank You!</title>\n</head>\n<body>\n  <h1>Thanks FIRST_NAME!</h1>\n  <p>Thanks for coming to our conference.  We couldn't have done it without you!</p>\n\n  <p>\n    Political activism is at the heart of any democracy and your voice needs to be heard.\n    Please consider reaching out to your following representatives:\n  </p>\n\n  <table>\n    <tr><th>Legislators</th></tr>\n    <tr><td>LEGISLATORS</td></tr>\n  </table>\n</body>\n</html>\n","markerStore":{"nextMarkerId":3,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":28},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":0,"column":1},"end":{"row":0,"column":5}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"2":{"range":{"start":{"row":19,"column":2},"end":{"row":19,"column":6}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/form_letter.html","digestWhenLastPersisted":"262a99121263c6ac5c5149320400569324371852","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"<html>\n<head>\n  <meta charset='utf-8'>\n  <title>Thank You!</title>\n</head>\n<body>\n  <h1>Thanks <%= name %></h1>\n  <p>Thanks for coming to our conference.  We couldn't have done it without you!</p>\n\n  <p>\n    Political activism is at the heart of any democracy and your voice needs to be heard.\n    Please consider reaching out to your following representatives:\n  </p>\n\n  <table>\n  <tr><th>Name</th><th>Website</th></tr>\n    <% legislators.each do |legislator| %>\n      <tr>\n        <td><%= \"#{legislator.first_name} #{legislator.last_name}\" %></td>\n        <td><%= \"#{legislator.website}\" %></td>\n      </tr>\n    <% end %>\n  </table>\n</body>\n</html>\n","markerStore":{"nextMarkerId":3,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":32},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":0,"column":1},"end":{"row":0,"column":5}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"2":{"range":{"start":{"row":24,"column":2},"end":{"row":24,"column":6}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/form_letter.erb","digestWhenLastPersisted":"f600504ae5d3e77f1347ce4bd41e105ef5425e85","preferredLineEnding":null,"deserializer":"TextBuffer","version":2},{"text":"require 'csv'\nrequire 'sunlight/congress'\nrequire 'erb'\n\nSunlight::Congress.api_key = \"e179a6973728c4dd3fb1204283aaccb5\"\n\ndef clean_zipcode(zipcode)\n  zipcode.to_s.rjust(5,\"0\")[0..4]\nend\n\ndef legislators_by_zipcode(zipcode)\n  Sunlight::Congress::Legislator.by_zipcode(zipcode)\nend\n\nputs \"EventManager initialized.\"\n\ncontents = CSV.open 'event_attendees.csv', headers: true, header_converters: :symbol\n\ntemplate_letter = File.read \"lib/form_letter.erb\"\nerb_template = ERB.new template_letter\n\ncontents.each do |row|\n  name = row[:first_name]\n\n  zipcode = clean_zipcode(row[:zipcode])\n\n  legislators = legislators_by_zipcode(zipcode)\n\n  form_letter = erb_template.result(binding)\n  puts form_letter\nend\n","markerStore":{"nextMarkerId":2,"markersById":{"0":{"range":{"start":{"row":18,"column":33},"end":{"row":18,"column":33}},"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":6,"undoStack":[{"type":"group-start","snapshot":{"0":{"range":[[18,29],[18,29]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[18,29],[18,29]],"newRange":[[18,29],[18,30]],"oldText":"","newText":"l"}},{"type":"group-end","snapshot":{"0":{"range":[[18,30],[18,30]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[18,30],[18,30]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[18,30],[18,30]],"newRange":[[18,30],[18,31]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[18,31],[18,31]],"newRange":[[18,31],[18,32]],"oldText":"","newText":"b"}},{"type":"group-end","snapshot":{"0":{"range":[[18,32],[18,32]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[18,32],[18,32]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[18,32],[18,32]],"newRange":[[18,32],[18,33]],"oldText":"","newText":"/"}},{"type":"group-end","snapshot":{"0":{"range":[[18,33],[18,33]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/event_manager.rb","digestWhenLastPersisted":"6967486d842fe1e7f200b975a6326670beb8ac2b","preferredLineEnding":null,"deserializer":"TextBuffer","version":2}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":28,"softTabs":true,"displayBuffer":{"id":29,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/form_letter.html","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":32,"softTabs":true,"displayBuffer":{"id":33,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/form_letter.erb","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":36,"softTabs":true,"displayBuffer":{"id":37,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/event_manager.rb","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/event_manager.rb","focused":true,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-html","language-ruby","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/form_letter.html":1446138298454,"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/form_letter.erb":1446138299657,"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/event_manager.rb":1446138300610},"keybinding-resolver":{},"metrics":{"sessionLength":7080330},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib":{"isExpanded":true,"entries":{}}},"selectedPath":"/Users/hectorhuertas/turing/1module/workshops/event_manager/lib/event_manager.rb","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}